<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Attendance Report</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      display: flex;
    }

    /* Sidebar */
    .sidebar {
      height: 100vh;
      background: #39bfbf;
      color: white;
      position: fixed;
      top: 0;
      left: 0;
      width: 300px;
      padding-top: 30px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: width 0.3s ease;
      overflow: hidden;
      text-align: center;
      z-index: 1000;
    }

    .sidebar.collapsed {
      width: 70px;
    }

    /* Logo */
    .logo-container {
      margin-bottom: 20px;
    }

    .logo-text img {
      width: 120px;
      height: auto;
    }

    .logo-tagline {
      font-size: 12px;
      color: #fff;
      margin-top: 6px;
      font-weight: 400;
      line-height: 1.3;
    }

    .sidebar.collapsed .logo-text,
    .sidebar.collapsed .logo-tagline {
      display: none;
    }

    .menu {
      flex-grow: 1;
      text-align: left;
    }

    .sidebar a {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #ffffff;
      padding: 14px 20px;
      text-decoration: none;
      font-size: 16px;
      margin: 8px 0;
      border-radius: 6px;
      transition: background 0.3s, padding 0.3s;
    }

    .sidebar a i {
      font-size: 18px;
      width: 20px;
      text-align: center;
    }

    .sidebar.collapsed a {
      justify-content: center;
      gap: 0;
      padding: 14px;
    }

    .sidebar.collapsed a span {
      display: none;
    }

    .sidebar a:hover {
      background: #12b5b5;
      color: #fff;
    }

    /* Logout style */
    .logout {
      background: #39bfbf;
      color: #fff !important;
      font-size: 14px;
      padding: 10px 16px;
      margin: 15px;
      border-radius: 6px;
      text-align: center;
    }

    .logout:hover {
      background: #1a252f;
    }

    /* Toggle button */
    .toggle-btn {
      position: absolute;
      top: 15px;
      left: 15px;
      background: #39bfbf;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      border: none;
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      transition: background 0.3s;
      z-index: 1100;
    }

    .toggle-btn:hover {
      background: #12b5b5;
    }

    /* Main content */
    .main {
      margin-left: 300px;
      padding: 20px;
      width: calc(100% - 300px);
      transition: margin-left 0.3s ease, width 0.3s ease;
    }

    .main.collapsed {
      margin-left: 70px;
      width: calc(100% - 70px);
    }

    /* Table styles */
    .table th { background-color: #f1f3f4; }
    .clock-time { color: #11cf9f; font-weight: bold; }
    .duration { color: #0153ac; font-size: 0.9rem; margin: 0 8px; }
    .overtime { color: #08a82d; font-weight: bold; }
    .reason { font-style: italic; color: #495057; }

    @media print {
      #controls { display: none; }
      .card { box-shadow: none; border: none; }
      .sidebar, .toggle-btn { display: none; }
      .main { margin: 0; width: 100%; }
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <button class="toggle-btn" id="toggle-btn">
      <i class="fa-solid fa-arrow-left"></i>
    </button>
    <div class="logo-container">
      <div class="logo-text"><img src="images/left.png" alt="Logo"></div>
      <div class="logo-tagline">Your Punctual Partner for Workforce<br>Management</div>
    </div>
    <div class="menu">
      <a href="emp_dashboard.jsp"><i class="fa-solid fa-house"></i> <span>Dashboard</span></a>
      <a href="EmpProfile.html"><i class="fa-solid fa-user"></i> <span>Profile</span></a>
      <a href="Attendance.html"><i class="fa-solid fa-calendar-check"></i> <span>Attendance</span></a>
      <a href="LeaveRequest.html"><i class="fa-solid fa-plane-departure"></i> <span>Leave Request</span></a>
      <a href="EmpPaySlip.html"><i class="fa-solid fa-file-invoice-dollar"></i> <span>My Payslips</span></a>
      <a href="OtRequest.html"><i class="fa-solid fa-stopwatch "></i> <span>OT Request</span></a>
    </div>
    <a href="#" class="logout"><i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span></a>
  </div>

  <!-- Main Content -->
  <div class="main" id="main">
    <div class="container mt-4">
      <!-- Controls -->
      <div id="controls" class="d-flex justify-content-between align-items-center mb-3">
        <h3>My Attendance Report</h3>
        <div class="d-flex gap-2">
          <select class="form-select w-auto" id="reportFilter">
            <option value="daily">Daily Report</option>
            <option value="weekly">Weekly Report</option>
            <option value="monthly" selected>Monthly Report</option>
          </select>
          <button class="btn btn-success" id="printBtn">
            <i class="fa-solid fa-print"></i> Print
          </button>
        </div>
      </div>

      <!-- Employee Login Report -->
      <div class="card shadow">
        <div class="card-body">
          <h5><i class="fa-solid fa-user"></i> Ravi Kumar (EMP001)</h5>
          <table class="table table-hover align-middle text-center" id="reportTable">
            <thead>
              <tr>
                <th><i class="fa-regular fa-calendar"></i> Date</th>
                <th><i class="fa-regular fa-clock"></i> Clock-in and Out</th>
                <th><i class="fa-solid fa-stopwatch"></i> Overtime (hrs)</th>
                <th><i class="fa-solid fa-comment-dots"></i> Reason</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2025-09-04</td>
                <td>
                  <span class="clock-time">10:02 AM</span>
                  <span class="duration">— 8h 58m —</span>
                  <span class="clock-time">07:00 PM</span>
                </td>
                <td class="overtime">2.2</td>
                <td class="reason">Urgent client delivery</td>
              </tr>
              <tr>
                <td>2025-09-03</td>
                <td>
                  <span class="clock-time">09:30 AM</span>
                  <span class="duration">— 8h 30m —</span>
                  <span class="clock-time">06:00 PM</span>
                </td>
                <td>-</td>
                <td>-</td>
              </tr>
              <tr>
                <td>2025-09-02</td>
                <td class="text-danger fw-bold">Leave</td>
                <td>-</td>
                <td class="reason">Personal Leave</td>
              </tr>
              <tr>
                <td>2025-09-01</td>
                <td>
                  <span class="clock-time">08:56 AM</span>
                  <span class="duration">— 10h 12m —</span>
                  <span class="clock-time">07:30 PM</span>
                </td>
                <td class="overtime">2.5</td>
                <td class="reason">Month-end reporting</td>
              </tr>
              <tr>
                <td>2025-08-31</td>
                <td class="text-primary">Sunday (Weekly Off)</td>
                <td>-</td>
                <td>-</td>
              </tr>
              <tr>
                <td>2025-08-30</td>
                <td class="text-success">Holiday: Independence Day</td>
                <td>-</td>
                <td>-</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Attendance Summary -->
      <div class="card shadow mt-4">
        <div class="card-body">
          <h5><i class="fa-solid fa-chart-pie"></i> Attendance Summary</h5>
          <table class="table table-bordered text-center mt-3">
            <thead class="table-light">
              <tr>
                <th>Total Working Days</th>
                <th>Present</th>
                <th>Leaves Taken</th>
                <th>Holidays</th>
                <th>Sundays</th>
                <th>Absents</th>
                <th>Overtime (hrs)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td id="workingDays">0</td>
                <td id="daysPresent">0</td>
                <td id="daysLeave">0</td>
                <td id="daysHoliday">0</td>
                <td id="daysSunday">0</td>
                <td id="daysAbsent">0</td>
                <td id="totalOvertime">0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script>
    const sidebar = document.getElementById('sidebar');
    const main = document.getElementById('main');
    const toggleBtn = document.getElementById('toggle-btn');
    const toggleIcon = toggleBtn.querySelector('i');

    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      main.classList.toggle('collapsed');

      if (sidebar.classList.contains('collapsed')) {
        toggleIcon.classList.remove('fa-arrow-left');
        toggleIcon.classList.add('fa-bars');
      } else {
        toggleIcon.classList.remove('fa-bars');
        toggleIcon.classList.add('fa-arrow-left');
      }
    });

    // Attendance filter
    function filterReport(type) {
      const rows = document.querySelectorAll("#reportTable tbody tr");
      const today = new Date();
      let present = 0, leave = 0, holiday = 0, sunday = 0, absent = 0, totalOT = 0;

      rows.forEach(row => {
        const dateStr = row.cells[0].innerText.trim();
        const rowDate = new Date(dateStr);
        let show = false;

        if (type === "daily") {
          show = rowDate.toDateString() === today.toDateString();
        } else if (type === "weekly") {
          const oneWeekAgo = new Date(today);
          oneWeekAgo.setDate(today.getDate() - 7);
          show = rowDate >= oneWeekAgo && rowDate <= today;
        } else if (type === "monthly") {
          show = rowDate.getMonth() === today.getMonth() &&
                 rowDate.getFullYear() === today.getFullYear();
        }

        if (show) {
          row.style.display = "";
          const status = row.cells[1].innerText;
          if (status.includes("Leave")) leave++;
          else if (status.includes("Holiday")) holiday++;
          else if (status.includes("Sunday")) sunday++;
          else present++;

          let ot = row.cells[2].innerText;
          if (ot !== "-" && !isNaN(parseFloat(ot))) {
            totalOT += parseFloat(ot);
          }
        } else {
          row.style.display = "none";
        }
      });

      const workingDays = present + leave + absent;
      absent = workingDays - (present + leave);

      document.getElementById("workingDays").innerText = workingDays;
      document.getElementById("daysPresent").innerText = present;
      document.getElementById("daysLeave").innerText = leave;
      document.getElementById("daysHoliday").innerText = holiday;
      document.getElementById("daysSunday").innerText = sunday;
      document.getElementById("daysAbsent").innerText = absent < 0 ? 0 : absent;
      document.getElementById("totalOvertime").innerText = totalOT.toFixed(1);
    }

    document.getElementById("reportFilter").addEventListener("change", function() {
      filterReport(this.value);
    });

    document.getElementById("printBtn").addEventListener("click", function() {
      window.print();
    });

    filterReport("monthly");
  </script>
</body>
</html>