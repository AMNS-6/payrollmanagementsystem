<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employee Payslip</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body { background:#f8f9fa; }
    .payslip-box {
      max-width: 900px;
      margin:auto;
      margin-left:70px;
      border: 1px solid #000;
      padding: 20px;
      background: #fff;
    }
    .header { text-align:center; margin-bottom:20px; color:#39bfbf; }
    table { width:100%; border-collapse: collapse; margin-top:10px; }
    table th, table td { border:1px solid #000; padding:6px; }
    table th { background:#f2f2f2; }
    .no-border td { border:none !important; }
    .signature { margin-top:40px; display:flex; justify-content:space-between; }
    .signature div { text-align:center; width:40%; }

   /* Sidebar */
    .sidebar {
      height:100vh; 
      background:#39bfbf; 
      color:white;
      position:fixed;
      top:0; 
      left:0; 
      width:300px;
      padding-top:30px; 
      box-sizing:border-box;
      display:flex; 
      flex-direction:column; 
      justify-content:space-between;
      transition:width 0.3s ease; 
      overflow:hidden; 
      text-align:center;
    }
    .sidebar.collapsed { 
    width:70px;
     }
      /* Logo */
    .logo-container {
      margin-bottom: 20px;
    }
     
    .logo-text img { 
    width:120px; 
    height:auto;
     }
    .logo-tagline { 
    font-size:12px; 
    color:#fff; 
    margin-top:6px; 
    font-weight:400;
    line-weight:1.3;
     }
    .sidebar.collapsed .logo-text,
     .sidebar.collapsed .logo-tagline { 
     display:none; 
     }
     .menu {
      flex-grow: 1;
      text-align: left;
    }
    .sidebar a {
      display:flex; align-items:center; gap:12px; color:#fff;
      padding:14px 20px; text-decoration:none; font-size:16px;
      margin:8px 0; border-radius:6px;
    }
    .sidebar a:hover { background:#12b5b5; }
    .sidebar.collapsed a { justify-content:center; gap:0; padding:14px; }
    .sidebar.collapsed a span { display:none; }
    .logout { background:#39bfbf; margin:15px; padding:10px 16px; border-radius:6px; text-align:center; }
    .logout:hover { background:#1a252f; }
    /* Content */
    .content { margin-left: 300px; padding: 20px; transition: margin-left 0.3s ease; }
    .content.collapsed { margin-left: 70px; }

    /* Toggle Button */
    .toggle-btn {
      position:absolute; top:15px; left:15px;
      background:#39bfbf; border-radius:50%; width:40px; height:40px;
      border:none; color:#fff; font-size:18px; cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      z-index:10;
    }
  </style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <button class="toggle-btn" id="toggle-btn"><i class="fa-solid fa-arrow-left"></i></button>
  <div class="logo-container">
    <div class="logo-text"><img src="images/logo.png" alt="Company Logo"></div>
    <div class="logo-tagline">Your Punctual Partner for Workforce<br>Management</div>
  </div>
  <div class="menu">
    <a href="emp_dashboard.jsp"><i class="fa-solid fa-house"></i> <span>Dashboard</span></a>
    <a href="EmpProfile.html"><i class="fa-solid fa-user"></i> <span>Profile</span></a>
    <a href="attendance.jsp"><i class="fa-solid fa-calendar-check"></i> <span>Attendance</span></a>
    <a href="LeaveRequest.html"><i class="fa-solid fa-plane-departure"></i> <span>Leave Request</span></a>
    <a href="EmpPaySlip.html"><i class="fa-solid fa-file-invoice-dollar"></i> <span>My Payslips</span></a>
    <a href="OtRequest.html"><i class="fa-solid fa-stopwatch me-2"></i> <span>OT Request</span></a>
  </div>

  <a href="#" class="logout" id="logoutBtn">
    <i class="fa-solid fa-right-from-bracket"></i> <span>Logout</span>
  </a>
</div>

<!-- Content -->
<div class="content" id="main">

  <!-- Payslip Section -->
  <div id="payslipSection" class="payslip-box d-none shadow-lg">
    <div class="header">
      <div class="logo-text"><img src="images/logo.png" alt="Company Logo"></div>
      <h2>AMNS Company Pvt Ltd</h2>
      <h5>Payslip for the period of <span id="payslipPeriod"></span></h5>
    </div>

    <!-- Employee Details -->
    <table class="no-border">
      <tr>
        <td>
          <b>Employee Id:</b> 101<br>
          <b>Structure Name:</b> HR<br>
          <b>Days Worked:</b> 28<br>
          <b>Bank A/c Number:</b> 1234567890<br>
          <b>UAN Number:</b> 216381279263
        </td>
        <td>
          <b>Name:</b> John Doe<br>
          <b>Designation:</b> Software Engineer<br>
          <b>Bank Name, Branch:</b> HDFC, Main Branch<br>
          <b>Leaves:</b> 3<br>
          <b>Overtime Hours:</b> 12
        </td>
      </tr>
    </table>

    <!-- Earnings & Deductions -->
    <table>
      <tr>
        <th colspan="2">Earnings</th>
        <th colspan="2">Deductions</th>
      </tr>
      <tr>
        <td>Basic Pay</td><td>â‚¹50,000</td>
        <td>PF</td><td>â‚¹5,000</td>
      </tr>
      <tr>
        <td>HRA</td><td>â‚¹10,000</td>
        <td>TDS</td><td>â‚¹2,000</td>
      </tr>
      <tr>
        <td>Conveyance</td><td>â‚¹5,000</td>
        <td>Health Insurance</td><td>â‚¹1,000</td>
      </tr>
      <tr>
        <td>Overtime</td><td>â‚¹2,000</td>
        <td>Loan Repayment</td><td>â‚¹3,000</td>
      </tr>
      <tr>
        <th>Total Earnings</th><th>â‚¹67,000</th>
        <th>Total Deductions</th><th>â‚¹11,000</th>
      </tr>
      <tr>
        <th colspan="2">Net Pay (Rounded)</th>
        <th colspan="2" id="netPay">â‚¹56,000</th>
      </tr>
    </table>

    <p class="fw-bold" id="amountWords">Rupees in words : </p>

    <button class="btn btn-primary mt-3" onclick="window.print()">ðŸ–¨ Print</button>
  </div>
</div>

<!-- Payslip Modal -->
<div class="modal fade" id="payslipModal" tabindex="-1" aria-labelledby="payslipModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Select Month & Year</h5>
      </div>

      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Year</label>
          <select class="form-select" id="yearSelect">
            <option selected disabled>Select Year</option>
            <option>2025</option>
            <option>2024</option>
            <option>2023</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="form-label">Month</label>
          <select class="form-select" id="monthSelect">
            <option selected disabled>Select Month</option>
            <option>January</option><option>February</option><option>March</option>
            <option>April</option><option>May</option><option>June</option>
            <option>July</option><option>August</option><option>September</option>
            <option>October</option><option>November</option><option>December</option>
          </select>
        </div>

        <div class="alert alert-info p-2">
          <small><b>Note:</b> Greyed-out months cannot be generated.</small>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-success" onclick="generatePayslip()">Generate Payslip</button>
      </div>
    </div>
  </div>
</div>

<!-- Logout Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title">Confirm Logout</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">Are you sure you want to log out?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" id="confirmLogoutBtn">Logout</button>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- JS Logic -->
<script>
//Convert number to words with "Only"
function numberToWords(num) {
  const a = ['','One','Two','Three','Four','Five','Six','Seven','Eight','Nine',
             'Ten','Eleven','Twelve','Thirteen','Fourteen','Fifteen','Sixteen',
             'Seventeen','Eighteen','Nineteen'];
  const b = ['', '', 'Twenty','Thirty','Forty','Fifty','Sixty','Seventy','Eighty','Ninety'];

  if (num === 0) return 'Zero Only';
  if (num < 20) return a[num] + " Only";
  if (num < 100) return b[Math.floor(num/10)] + (num%10 ? ' ' + a[num%10] : '') + " Only";
  if (num < 1000) return a[Math.floor(num/100)] + ' Hundred ' + numberToWords(num%100).replace(" Only","");
  if (num < 100000) return numberToWords(Math.floor(num/1000)).replace(" Only","") + ' Thousand ' + numberToWords(num%1000).replace(" Only","");
  return num + " Only";
}


  // Sidebar toggle
  const sidebar=document.getElementById('sidebar');
  const main=document.getElementById('main');
  const toggleBtn=document.getElementById('toggle-btn');
  const toggleIcon=toggleBtn.querySelector('i');
  toggleBtn.addEventListener('click',()=>{
    sidebar.classList.toggle('collapsed');
    main.classList.toggle('collapsed');
    toggleIcon.classList.toggle('fa-bars');
    toggleIcon.classList.toggle('fa-arrow-left');
  });

  // Show modal on load
  window.onload = function() {
    const modal = new bootstrap.Modal(document.getElementById("payslipModal"));
    modal.show();
  }


//Generate Payslip
function generatePayslip() {
 const year = document.getElementById("yearSelect").value;
 const month = document.getElementById("monthSelect").value;

 if (!year || !month || year.includes("Select") || month.includes("Select")) {
   alert("Please select both Month and Year!");
   return;
 }

 // Close modal
 const modal = bootstrap.Modal.getInstance(document.getElementById("payslipModal"));
 modal.hide();

 // Update payslip period
 document.getElementById("payslipPeriod").innerText = month + " " + year;

 // Show payslip
 document.getElementById("payslipSection").classList.remove("d-none");

 // Update words for Net Pay
 const netPayValue = 56000; // from your table
 document.getElementById("amountWords").innerText =
   "Rupees in words : " + numberToWords(netPayValue);
}


  // Logout modal
  document.addEventListener("DOMContentLoaded", function () {
    const logoutBtn = document.getElementById("logoutBtn");
    const confirmLogoutBtn = document.getElementById("confirmLogoutBtn");

    if (logoutBtn) {
      logoutBtn.addEventListener("click", function (e) {
        e.preventDefault();
        const modal = new bootstrap.Modal(document.getElementById("logoutModal"));
        modal.show();
      });
    }

    if (confirmLogoutBtn) {
      confirmLogoutBtn.addEventListener("click", function () {
        window.location.href = "login.jsp"; 
      });
    }
  });
</script>
</body>
</html>
